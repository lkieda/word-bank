<div data-bind="visible: isLoadingData">
  <p>Pobieranie danych, proszę czekać...</p>
</div>

<div data-bind="visible: isExerciseFormVisible" style="display: none;">
  <form data-bind="submit: submitAnswer">
    <fieldset>
      <table>
        <tr>
          <td colspan="2" style="text-align: center; height: 1.5em;">
            <span data-bind="text: generalFeedback().message, fadeVisible: generalFeedback().type"></span>
          </td>
        </tr>
        <tr>
          <td>Präsens</td>
          <td>
            <input type="text" data-bind="value: praesensAnswer"/>
          </td>
          <td>
            <span class="feedback" data-bind="text: praesensFeedback"></span>
          </td>
        </tr>
        <tr>
          <td>Präteritum</td>
          <td>
            <input type="text"
                   data-bind="value: praeteritumAnswer, valueUpdate: 'afterkeydown', hasfocus: praeteritumFocus"  />
          </td>
          <td>
            <span class="feedback" data-bind="text: praeteritumFeedback"></span>
          </td>
        </tr>
        <tr>
          <td>Partizip II</td>
          <td>
            <input type="text"
                   data-bind="value: partizipAnswer, valueUpdate: 'afterkeydown', hasfocus: partizipFocus"/>
          </td>
          <td>
            <span class="feedback" data-bind="text: partizipFeedback"></span>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <button type="submit" class="orange submit" data-bind="enable: isSubmitEnabled" style="float: right">
              Sprawdzam
            </button>
          </td>
        </tr>
      </table>
    </fieldset>
  </form>
</div>

<div data-bind="visible: isSummaryTableVisible" style="display: none;">
  <form data-bind="submit: loadNewQuestions">
    <table>
      <thead>
        <tr>
          <td>Präsens</td>
          <td>Präteritum</td>
          <td>Partizip II</td>
          <td>attempts</td>
        </tr>
      </thead>
      <tbody data-bind="foreach: answeredQuestions">
        <tr>
          <td data-bind="text: praesens"></td>
          <td data-bind="text: praeteritum"></td>
          <td data-bind="text: partizip"></td>
          <td data-bind="text: attempts" style="text-align: center;"></td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="4">
            <p style="float: left;">
              Score: <span data-bind="text: scoreString"></span>
            </p>
              <button type="submit" class="orange submit" style="float: right; margin-top: 8px;"
                data-bind="hasfocus: isSummaryTableVisible">
                Next round
              </button>
          </td>
        </tr>
      </tfoot>
    </table>
  </form>
</div>

<%= javascript_include_tag "ViewModels/ExerciseViewModel.js" %>
<%= javascript_include_tag "ViewModels/ExerciseViewModelMock.js" %>
<script type="text/javascript">
    ko.applyBindings(new ExerciseViewModel());
</script>